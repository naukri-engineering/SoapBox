Notifications in mobile apps are a great way of engaging users, re-engaging with inactive users and retaining the active ones. **Soapbox** is a library that helps generate rich and dynamic notifications to cater to a diverse audience. It can create normal, carousel notifications with text and images. These can either be push notifications or notifications generated locally within the app.

**Features**

1. Quick and easy set up with just a few lines of code.
2. Compatible with API levels 15 and above.
3. Creates three types of notifications â€“ normal, carousel with two images, carousel with text and an image.
4. The images are automatically cached for subsequent lookups.
6. Supports deep linking. Each message click takes user to the respective landing page in the app.
7. Attach custom data with notification. It could be the campaign tracking data or anything else. This data will be delivered to the app when it is launched on notification click.
8. Supports cyclic as well as acyclic carousel navigation. Cyclic navigation goes on endlessly whereas acyclic one stops after the last message.
9. Carousel notifications fallback to normal notification on API level 15 and Android N. The support for N will be released soon.
10. Once a day clears the tray of all notifications generated by this library.

**Integration**

To integrate the library in your application, follow the steps below,

1. Download and include this library in your project
 
2. Initialize SoapBox: 
    ```Java    
    SoapBox.getInstance(getApplicationContext(), true)
    ```
    Set the second argument as true to enable logs from the library. Turn it off on production.
 
3. To create Normal notification,
    * Instantiate *NormalNotificationData* and define the following properties
        * notificationSmallIcon: resource id of the small icon to use in notification layout. Mandatory.
        * notificationTitle: the notification title.
        * notificationText: the notification message.
        * notificationId: the notification id. If a notification with the same id has already been posted by your application and has not yet been cancelled, it will be replaced by the updated information.
    * Send notification: SoapBox.getInstance(getApplicationContext(), true).sendNotification(*NormalNotificationData*)
    
4. To create Carousel notification with text and an image,
    * Instantiate *SliderNotificationData* and define the following properties
        * notificationSmallIcon: resource id of the small icon to use in notification layout. Mandatory.
        * notificationLargeIcon: resource id of the large icon to use in notification layout. This icon becomes visible on left on expanding the notification.
        * notificationTitle: the notification title.
        * notificationText: the notification message.
        * notificationId: the notification id. If a notification with the same id has already been posted by your application and has not yet been cancelled, it will be replaced by the updated information.
        * isNotificationCyclic: if you want the carousel to be cyclic set it to true.
        * notificationLastPageText: text message to display on the last message/card if *isNotificationCyclic* is false. Not specifying this text will show an empty card in the end.
        * sliderCards: list to inflate data into notification. Contains image url, title and description for each card. Mandatory property. The image is optional.
        * returningDataList: custom data in the form of key value pairs to be passed to your application when a notification is clicked.
    * Send notification: SoapBox.getInstance(getApplicationContext(), true).sendNotification(*SliderNotificationData*)
    
5. To create Carousel notification with two images,
    * Instantiate *CarouselImageNotificationData* and define the following properties
        * notificationSmallIcon: resource id of the small icon to use in notification layout. Mandatory.
        * notificationLargeIcon: resource id of the large icon to use in notification layout.
        * notificationTitle: the notification title.
        * notificationText: the notification message.
        * notificationId: the notification id. If a notification with the same id has already been posted by your application and has not yet been cancelled, it will be replaced by the updated information.
        * isNotificationCyclic: whether the carousel is cyclic or acyclic. Can be true/false.
        * notificationLastPageText: text message to display on the last card if *isNotificationCyclic* is false. Not specifying this text will show an empty card in the end.
        * carouselCards: list of image urls from which images are to be fetched and shown. Mandatory.
        * returningDataList: custom data in the form of key value pairs to be passed to your application when a notification is clicked.
    * Send notification: SoapBox.getInstance(getApplicationContext(), true).sendNotification(*CarouselImageNotificationData*)
  
6. Implement a broadcast reciever and register it with the actions below. The receiver will get invoked when a message is clicked.
      ```Java     
      <receiver android:name="com.example.receiver.NotificationClickBroadcast">
            <intent-filter>
                <action android:name="notification_job_detail_click_broadcast" />
                <action android:name="notification_view_all_click_broadcast" />
                <action android:name="notification_last_page_click_broadcast" />
                <action android:name="notification_image_click_broadcast" />
                <action android:name="normal_notification_click_broadcast" />
            </intent-filter>
      </receiver>
      ```
      
7. Handle the actions and data values in *onReceive* of the broadcast receiver. The actions values are listed above and the data values are as below. Use these to take appropriate actions like launching different screens, logging etc...
    1. index: An integer value indicating the item position clicked in carousel and slider.
    2. notification_type: A string indicating the type of notification clicked viz. normal, slider, carousel.
    3. returning_object: The hashmap that you had created to pass custom data in carousel and slider.

**Sample Screenshots**

![ScreenShot](assets/carousel1_1_b.jpeg) 

![ScreenShot](assets/carousel2a_2_b.jpeg) 

![ScreenShot](assets/carousel3_3_b.jpeg)

    
**Contributors**

* Vishnu Anand

* Vishakha Tyagi

* Rashi Atry

* Minni Arora

**Contact Us**

Get in touch with us with your suggestions, thoughts and queries at engineering@naukri.com

**License**

Please see [LICENSE.md](LICENSE.md) for details

**Acknowledgement**

This product includes Picasso downloaded from https://github.com/square/picasso which is licensed under the Apache License, Version 2.0
